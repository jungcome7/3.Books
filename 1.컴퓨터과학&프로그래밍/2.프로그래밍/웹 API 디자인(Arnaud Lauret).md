# 웹 API 디자인
### 지은이 : Arnaud Lauret
### 옮긴이 : 황건구
### 출판사 : 영진닷컴
### 읽은 날 : 2021.04.04 ~ 2021.04.06

# 목차
# 1부. API 디자인 기초
### 1. API 디자인이란 무엇인가?
### 2. 사용자를 위한 API 디자인하기
### 3. 프로그래밍 인터페이스 디자인하기
### 4. API 명세 포맷을 이용한 API 디자인
# 2부. 사용하기 좋은 API 디자인
### 5. 직관적인 API 디자인하기
### 6. 예측 가능한 API 디자인하기
### 7. 간결하고 체계적인 API 디자인하기
# 3부. 상황에 맞는 API 디자인
### 8. 안전한 API 디자인하기
### 9. API 디자인 발전시키기
### 10. 네트워크 효율적인 API 디자인하기
### 11. 컨텍스트에 맞는 API 디자인하기
### 12. API 문서화하기
### 13. 성장하는 API

1. 형편없이 디자인된 API는 실패할 수밖에 없습니다. 이런 숙명에서 벗어나기 위해서는 어떻게 해야 하는 걸까요? 답은 간단합니다. API를 적절하게 디자인하는 법을 학습하면 됩니다.

2. 솔직히 말하자면 데이터베이스 모델이 외부로 노출되는 경우는 보통 안 좋은 아이디어가 만들어 낸 결과이며 사용자 경험을 불편하게 만듭니다.

3. 컨슈머들은 여러분의 소프트웨어 아키텍쳐적 선택에 대해 전혀 관심이 없습니다. 그들이 원하는 것은 그들이 검색한 상품에 대해서 필요한 정보들이 모두 나오는 것뿐입니다. 따라서 필수 정보인 카탈로그 설명과 카탈로그 가격 정보를 구현에서 합쳐 하나의 상품 검색 목표로 묶어 그림 오른쪽처럼 제공하는 것이 더 나을 것입니다.

4. 드러나지 않아야 하는 소프트웨어 아키텍쳐와 API 디자인을 매핑시키는 것은 컨슈머가 API를 이해하기도 사용하기도 어렵게 만듭니다. 다시 말씀드리자면, API 목표 캔버스를 사용해서 사용자들이 무엇을 해야 하는지에 집중하면 이러한 디자인적 문제를 쉽게 회피할 수 있습니다.

5. 컨슈머가 이해하고 사용하기 쉽게 해야 합니다. API는 반드시 컨슈머의 관점에서 디자인되어야 합니다.

6. 파라미터는 반드시 필요한 데이터만을 제공해야 하고 불필요한 정보는 제공해서는 안 됩니다. 또한, 백엔드가 자체적으로 처리할 수 있는 데이터를 포함해서도 안 됩니다.

7. 액션 리소스는 명사로 표현되지 않습니다. 액션을 표현하는 데는 동사가 쓰인다는 것을 명심하기 바랍니다. 즉, 액션 리소스는 함수를 표현한다고 보면 됩니다. 액션 리소스를 클래스에 속한 함수처럼 생각하고 보면, 리소스의 하위 리소스로 표현할 수 있습니다. 우리가 카트 리소스의 경로를 /cart이라고 정했다면, cart.checkout() 메서드는 /cart/check-out으로 표현할 수 있습니다. 그렇지만 우리는 또한 단일 함수인 checkoutCart()를 생각할 수도 있는데, 이러면 /check-out-cart처럼 단일 액션 리소스로 표현할 수도 있습니다. 이 두 가지 경우 모두 HTTP 메서드 POST를 이용해서 액션 리소스의 트리거를 발생시킵니다.
   
8. HTTP 메서드 POST는 유즈케이스에 적합한 다른 메서드가 없을 때 기본값으로 택하는 메서드입니다.

9. API 명세 포맷은 프로그래밍 인터페이스를 설명하기 위해 필요합니다. 그렇기에 API 목표를 식별하는 동안에는 필요하지 않습니다. 3장에서 배웠듯, API가 무엇을 제공할지 명확하게 모르는 상태로 프로그래밍 인터페이스를 디자인하겠다는 것은 끔찍한 생각입니다!

10. 따라서 데이터 타입과 포맷을 정할 때는 여러분은 반드시 인간 중심적인 사고를 바탕으로 정해야 하며, 정말 중요한 것은 항상 정확한 표현을 제공하려고 해야 합니다. 복잡한 포맷을 사용하는 경우 정보를 확실하고 충분하게 제공하려 노력해야 합니다. 그리고 가능하다면, 컨텍스트에 대한 이해 없이도 이해할 수 있도록 노력해야 합니다.

11. 목표의 그룹은 어떻게 정해야 할까요? 여기에 정답은 없습니다. 대신 팁을 드리자면, 목표들을 기능적인 관점에서 그룹화하라는 것입니다. 여러분이 REST API를 디자인한다면, URL 경로가 바로 목표를 대변한다고 착각해서는 안됩니다. 여러분은 반드시 각 목표의 기능적인 측면에 집중해야지, 표현에 집중해서는 안됩니다.

12. 만약 송금 목표의 리스폰스로 송금의 ID인 "1775688964"라는 문자열만 덩그러니 반환한다면 어떤 생각이 들 거 같으십니까? 먼저, 컨슈머는 리스폰스의 Content-type이 application/json이나 application/xml로 반환되는 게 일반적인데, text/plain으로 리스폰스가 반환되어서 혼란스러울 겁니다. 이는 어색하지만 어찌어찌 사용할 수는 있을 겁니다...만 금융 회사는 송금 목록 목표의 많은 후속 호출들을 피하기 위해 한 번에 전체 리소스에 대한 응답을 보내기로 결정해 버렸습ㄴ디ㅏ. text/plain이었던 순수한 문자열인 리스폰스는 이제 application/json 리스폰스로 오브젝트를 담게 되었습니다. 이는 브레이킹 체인지입니다.

13. 여러분이 보셨다시피, 모든 고레벨의 데이터(REST API의 리소스들)은 반드시 오브젝트라는 봉투에 담겨 확장성을 보장하고 브레이킹 체인지의 위협을 줄여야 합니다.

14. 여러분이 보셨다시피 디자인에서 확장성이란 브레이킹 체인지를 겪을 위험을 적게 하면서, 수정을 수행할 수 있도록 하는 것에만 국한된느 것이 아닙니다. 확장성은 API가 최초에 의도된 목적보다 더 넓은 의미의 유즈케이스에 대응할 수 있게 해주는 것이기도 합니다.

15. 항상 작업 중인 현재의 특정한 유즈케이스나 흐름에 매몰되지 않고 더 넓게 봐야 합니다. 특히 UI흐름 같은 것들은 프로세스와 상관이 없습니다. 또한, 각 디자인 시 단계별로 독립적으로 동작할 수 있게 해야 합니다. 보다 범용적으로 쓸 수 있는 입력과 출력을 택하면, 특히 ID를 이용하면, 이를 달성하는 데 도움이 됩니다.

16. API가 커질수록, 발전의 횟수가 늘어날수록, 당연하게 브레이킹 체인지의 위험도 커집니다. 이는 이해하기 매우 간단한 데다가 해결 방법도 분명합니다. 큰 API를 만드는 대신에, 작은 API를 여러 개 만드는 겁니다.

17. API 디자이너는 과거의 허술한 디자인 탓에 제대로 된 디자인을 도입하면 브레이킹 체인지가 발생할 수 있기에, 낡은 디자인과 공존을 추구해야 할 수도 있습니다.

18. API 디자인 지침을 만드는 일은 단순히 글로 쓴다고 끝이 아니라, 사람들이 지침을 인식하고 받아들이도록 꾸준히 발전시켜야 합니다.

19. API 디자인 지침을 작성할 때 한 번에 모든 가능성과 모든 엣지 케이스를 다루는 최고의 지침을 만들려 하지 마십시오. 시간을 낭비하는 꼴이며 조악한 문서를 작성하게 될 겁니다. 대신 기본 필수 주제를 간단하고 직관적으로 다루는 것을 시작하십시오. 완전성과 정확성을 목표로 하십시오. 지금은 HTTP를 사용하는 멋진 방법을 발명하려 애쓸 때가 아닙니다.
